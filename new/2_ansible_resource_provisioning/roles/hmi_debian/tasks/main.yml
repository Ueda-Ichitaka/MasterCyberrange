---

- name: Install essential packages
  ignore_errors: true
  apt:
    pkg: 
    - libmodbus-dev
    - anacron
    update_cache: true
    state: present

- name: copy binary
  ansible.builtin.copy:
    src: ../../remote_host_files/plc/hmi
    dest: ~/hmi

- name: copy daemon service definition
  template:
    src: hmid.service
    dest: /etc/systemd/system/hmid.service


- name: activate modules
  ignore_errors: true
  ansible.builtin.shell: >
    export LC_ALL="C.UTF-8";
    sudo chmod +x ~/hmi
    sudo systemctl enable hmid.service